<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meteorite Explorer</title>
    <link rel="stylesheet" href="/dist/output.css">
</head>
<body class="bg-stone-900">
    <footer class="flex flex-col items-center justify-center ">
        <div class=" bg-blue-800 w-full text-center">
            <h1 class="text-xl">Meteorite Explorer</h1>
        </div>
        <div>
            <form class=" bg-red-300 p-4 gap-2 flex" action="/getMeteorite" method="GET">
                <input class="border-b-2 border-black text-gray-600 opacity-80" type="text" name="searchTerms" placeholder="Enter Search Terms" value="">
                <button class=" bg-red-600 rounded text-black  p-4">Search</button>
            </form>
        </div>
    </footer>
    <main >
        <% if(typeof matchingElement !== 'undefined' && matchingElement.length > 0) { %>
            <div class="relative overflow-scroll mx-4 max-w-6xl h-[calc(100vh-420px)] mx-auto my-4">
            <table class=" bg-green-600 text-slate-100 table-fixed w-full relative">
                <thead>
                    <tr class="border-2 border-slate-700">
                        <th class="text-left sticky left-0 w-44 border-2 border-slate-700">Name</th>
                        <th class="text-left w-44 border-2 border-slate-700">Id</th>
                        <th class="text-left w-44 border-2 border-slate-700">Name type</th>
                        <th class="text-left w-44 border-2 border-slate-700">Rec class</th>
                        <th class="text-left w-44 border-2 border-slate-700">Mass (g)</th>
                        <th class="text-left w-44 border-2 border-slate-700">Fall</th>
                        <th class="text-left w-44 border-2 border-slate-700">Year</th>
                        <th class="text-left w-44 border-2 border-slate-700">Latitude</th>
                        <th class="text-left w-44 border-2 border-slate-700">Longitude</th>    
                    </tr>                    
                </thead>
                <tbody>
                    <% matchingElement.forEach(e => { %>
                        <tr>
                            <td class="sticky left-0 bg-green-800 border-2 border-slate-700"><%= e.name %></td>
                            <td class="text-left border-2 border-slate-700"><%= e.id %></td>
                            <td class="border-2 border-slate-700  "><%= e.nametype %></td>
                            <td class="border-2 border-slate-700  "><%= e.recclass %></td>
                            <td class="text-left border-2 border-slate-700"><%= e.mass %></td>
                            <td class="border-2 border-slate-700  "><%= e.fall %></td>
                            <td class="text-left border-2 border-slate-700">
                                <% if (e.year) { %>
                                    <%= e.year.slice(0, 4) %>
                                <% } else { %>
                                    Year Not Available
                                <% } %>
                            </td>
                            <td class="text-left border-2 border-b-slate-700"><%= e.reclat %></td>
                            <td class="text-left border-2 border-b-slate-700"><%= e.reclong %></td>
                        </tr>
                    <% }) %>
                </tbody>
            </table>
            </div>
            <!-- Pagination Controls -->
            <div class="flex justify-center mt-4">
                <% if (currentPage > 1) { %>
                    <a href="?page=<%= currentPage - 1 %>" class="px-4 py-2 bg-blue-600 text-white rounded">Previous</a>
                <% } %>

                <% if (matchingElement.length === 50) { %>
                    <a href="?page=<%= currentPage + 1 %>" class="px-4 py-2 bg-blue-600 text-white rounded ml-2">Next</a>
                <% } %>
            </div>
        <% } else if(typeof matchingElement !== 'undefined' && matchingElement.length === 0){ %>
            <p class="bg-yellow-300">No records found !</p>
        <% } %>
    </main>
    <script src="/js/main.js" defer ></script>
</body>
</html>